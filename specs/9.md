---
issue: 9
title: # Protocol minter
author: Tadej Vengust <tadej.vengust@0xcert.org>
category: spec
status: Draft
created: 2018-03-15
---

## Simple Summary

Protocol minter allows trustless minting of Xcert tokens directly to recipient.

## Abstract

Protocol minter uses a combination of off chain agreement between Xcert issuer and recipient and on chain settlement of that agreement. So lets say that Alice is an Xcert issuer and Bob is the recipient. Alice and Bob come to an agreement that Alice will mint and send Bob an Xcert and Bob will pay for it in XCT Tokens. Now instead of Bob paying Alice in advance and then waiting for Alice to mint and send the token to Bob sometime in the future everything is done in a single atomic operation. 

## Motivation

There are multiple motivations behind protocol minter. 

First is trust. Minter provides a way to mint and exchange an Xcert for XCT tokens in a single atomic operation making the whole operation trustless. 

Second are simplicity and lower fees. The same result could be achieved if issuer would mint a new Xcert to himself and then user protocol trader to make the trade. But that would require more operations and overall higher blockchain fees. 

Third is that issuer can delegate paying of blockchain fees to the recipient. With protocol minter recipient is the one who triggers the on chain operation and by doing so is responsible for paying all the blockchain fees. 

## Specification

Protocol minter is a smart contract that implements a way to mint tokens in a trustless way. To provide this it uses several other components like blockchain signatures and proxy smart contracts. 

To make the minter smart contract upgrade-able we created additional smart contracts called proxies. There are different proxies depending on the functionality. Protocol minter uses services of two different proxies. One is TokenTransferProxy and the other is XcertMintProxy. 

A proxy is best explained as a smart contract that allows or reject a key functionality to the minter smart contract and is controlled by a multisig wallet or a DAO. This way proxies can be trusted since they only allow access to smart contracts that were approved trough the DAO process.

The whole minting process has several steps.
1. Issuer and recipient come to and agreement (off chain) that issuer will create a specific Xcert for recipient in exchange for XCT tokens.
2. Issuer makes a blockchain signatures of the agreed data and sends the data used for the signature with public signature components to the recipient.
3. Issuer allows XcertMintProxy to mint Xcert in his name.
4. Recipient allows TokenTransferProxy to transfer his XCT tokens. 
5. Recipient calls minter smart contract with the data and signature information.
6. Minter contract performs an atomic operation which mints a new Xcert to recipient and transfers XCT tokens to the issuer.

If any step of the process is not correct the minter contract will not perform the operation. So if the recipient tries to change the data so he would transfer less XCT tokens the operation would fail because Issuer blockchain signature would not match with the data recipient provided. If issuer or recipient would not allow proxies to operate in their name the operation would fail etc. 


## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
